(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),o=n.n(c),i=(n(13),n(2)),u=n(3),s=n(4),l=n.n(s),d=n(7),f=n(1),b=(n(15),function(e){var t=e.code,n=e.send,c=e.gameId,o=e.cursors,i=e.cursorPosition,u=e.setCursorPosition,s=e.wrongChars,l=e.setWrongChars;Object(a.useEffect)((function(){""!==t&&n("cursor",{cursorPosition:i},c)}),[i,c,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"code-field-header"}),r.a.createElement("pre",{onKeyDown:function(e){var n;["Tab"," "].includes(e.key)&&e.preventDefault(),n=e.key,["Shift","Meta","Alt","Control"].includes(n)||("Backspace"===e.key?s>0?l(s-1):i>0&&u(i-1):s>0||function(e){if(["Shift","Meta","Alt","Control","Backspace"].includes(e))throw new Error("Not mapable to key");return"Enter"===e?"\n":"Tab"===e?"\t":e}(e.key)!==t[i]?l(s+1):u(i+1))},id:"code-field-body",tabIndex:"0"},t&&t.split("").map((function(e,t){var n={};return Object.entries(o).forEach((function(e){var a=Object(f.a)(e,2),r=a[0],c=a[1];t===c&&(n.background=r)})),s>0?t>=i&&t<i+s&&(n.background="#ba5d5d"):t===i&&(n.background="#cfbaa5"),"\n"===e?r.a.createElement("br",{key:t}):r.a.createElement("span",{key:t,style:n},e)}))))}),m=function(e){var t=e.messages,n=e.onSubmitChatInput,a=e.setChatInput,c=e.chatInput;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"chat-header"}),r.a.createElement("div",{id:"chat-body"},t.map((function(e,t){var n=e.sender,a=e.content;return r.a.createElement("div",{key:t},r.a.createElement("b",null,"<",n,">"),r.a.createElement("span",null,a))}))),r.a.createElement("form",{onSubmit:n,id:"chat-input"},r.a.createElement("input",{onChange:function(e){return a(e.target.value)},type:"text",value:c})))},h={sender:"liracer",content:'To join a game, send "/join id". If a game by the given id exists you join that, otherwise a new game is created.'},g=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),s=Object(f.a)(o,2),g=s[0],p=s[1],j=Object(a.useState)(null),v=Object(f.a)(j,2),E=v[0],O=v[1],k=Object(a.useState)(""),w=Object(f.a)(k,2),y=w[0],S=w[1],C=Object(a.useState)(null),I=Object(f.a)(C,2),P=I[0],W=I[1],x=Object(a.useState)({}),B=Object(f.a)(x,2),J=B[0],T=B[1],D=Object(a.useState)(0),M=Object(f.a)(D,2),N=M[0],q=M[1],A=Object(a.useState)(0),F=Object(f.a)(A,2),K=F[0],Y=F[1],$=function(e,t,n){var a={type:e,body:t,id:n};E.send(JSON.stringify(a))},z=function(e,t){return c((function(n){return n.concat({sender:e,content:t})}))},G=function(){return c((function(e){return e.concat(h)}))};Object(a.useEffect)((function(){z("liracer","Welcome to liracer!"),G(),function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new WebSocket("ws://localhost:3001/"),O(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(a.useEffect)((function(){if(null!==E){E.onmessage=function(e){var t=JSON.parse(e.data),n=t.type,a=t.body;switch(n){case"messages":case"message":c((function(e){return e.concat(a)}));break;case"quote":p(a.code),z("liracer","The current quote is ".concat(a.program," in the ").concat(a.language," language")),q(0),Y(0);break;case"cursor":T((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(i.a)({},a.color,a.cursorPosition))}));break;default:throw new Error("Could not dispatch message")}}}}),[E]);return r.a.createElement("div",{id:"game"},r.a.createElement(m,{messages:n,onSubmitChatInput:function(e){if(e.preventDefault(),""!==y){!function(){var e=y.split(" ");switch(e[0]){case"/join":var t=e[1];$("join",{},t),W(t);break;default:if(null===P)z("liracer","You need to be in a game to do this."),G();else $("message",{content:y},P)}}(),S("")}},chatInput:y,setChatInput:S}),r.a.createElement(b,{code:g,send:$,gameId:P,cursors:J,cursorPosition:N,setCursorPosition:q,wrongChars:K,setWrongChars:Y}))},p=(n(16),function(){return r.a.createElement(g,null)});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.be1fc49c.chunk.js.map